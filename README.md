# Trial-Assignment
Во всех стратегия transaction costs равны 10 basic points от размера позиции и одинаковы для покупки и продажи.
Для каждой стратегии вычисляется суммарный накопленный return (compounding), для каждого отдельного момента времени из исторических данных.
По данной информации вычисляются величины Maximal Drawdown, Calmar Ratio (total return divided by maximal drawdown),
MAR Ratio (Compound Annnual Growth Rate divided by maximal drawdown, Sharpe Ratio (без учета risk-free rate).

Вследствии использования resampling с дневной частотой, для цен тикеров, все индексы были автоматически дополнены полным набором календарных (не торговых) дней,
цены в не торговые дни наследуются из цен в последних цен для торговых дней.

Описание файлов:

Data differentiation.ipynb - разделение множества тикеров пр группам, подгруппам и секторам (используется для поиска коинтегрированных пар тикеров внутри отдельных
секторов, при помощи augmented Engle-Granger. Разделение по секторам используется для уменьшения Multiple comparisons bias)

Data preparation (1 day resampling).ipynb - осуществляет resample цен с дневной частотой, извлекает информацию только о ценах закрытия
и помещает ее в один файл для всех тикеров

market_data_daily_resample_close.csv - данные о дневных ценах закрытия для всех акций .

frac_score_3mnth.csv (файл стратегии) - файл с ranking score для тикеров, полученной из SEC EDGAR. Файл был сгенерирован при помощи файла Total_no_duplicates_12_10_18.csv
о опубликованных позициях фондов, размером 2+ ГБ, его не удалось загрузить в репозиторий к текущему моменту.

cointegrated pairs listing.ipynb - файл с процедурами нахождения коинтегрированных пар внутри отдельных секторов, групп, подгрупп.

Cтратегии:

Ranking funds.ipynb - ranking стратегия, где используется информация о опубликованных позициях фондов, извлеченная из системы SEC EDGAR (файл frac_score_3mnth.csv).
Каждому тикеру сопоставляется отношение величины суммарных средств, вложенных в данный актив со стороны всех фондов
к общей капитализации всех опубликованных за последний квартал позиций, для всех фондов.
Ребелансировка портфеля также осуществляется раз в квартал.
Рассматривается только long стратегия, покупаются пять акций с самой высокой величиной fraction score.

Final total return в период с второй половины 2013 года по 2018 - около 200%. Круглыми красными точками отмечены даты ребалансировки портфеля.
По итогам выводятся данные о историческом содержимом портфеля для разных моментов времени.

coint_RNN.ipynb - стратегия на коинтегрированной паре тикеров "ADSK", "AMAT" (найденой с помощью процедур из файла cointegrated pairs listing.ipynb).
Торговля ведется на ряде значений отношений цен двух тикеров, в каждый отдельный момент времени принимается решение о
входе в длинную позицию по паре тикеров (long "ADSK", short "AMAT") с помощью Recurrent Neural Network, для каждой позиции определяется profit target,
stop loss данной позиции, максимальное время удержания позиции равно 30 календарным (не торговым) дням.

Рассматривается одна конфигурация сети, состоящая из входного Dense Time Distributed Layer с 64 нейронами,
3 Gated recurrent unit содержащих по 64 скрытых нейрона, еще одного Dense Layer из 64 скрытых нейронов. Рассматривается 1 конфигурация для profit target и stop loss,
Также profit target, stop loss корректируются в зависимости от текущей волатильности цен (в режиме с большей волатильностью допускаются более широкие диапазоны PT, SL).
Сеть обучаюется на протяжении 20 эпох, для реализации используется Keras.
Данная стратегия приносит убытки из-за большой величины transaction costs по причине слишком частых открытий позиции, требует дальнейшей настройки для получения прибыли.

Momentum_ribbons_ranking.ipynb - momentum стратегия для тикера ADSK с использованием 10 скользящих средних с периодами от 10 до 100 дней.
В зависимости от того, соответствуют ли величины скользящих средних убывающему или возрастающему порядку скользящих средних, упорядоченных по величине периода,
генерируются сигналы на покупку и продажу, далее в точках максимальной и минимальной амплитуды сигнала осуществляется открытие длинных и коротких позиций.

Final total return в период с 2010 года по 2018 равен 113%, total return также накапливается.

Во всех стратегиях учитываются Regular Cash дивиденды, величина которых добавляется к прибыли в случае длинной позиции и выплачивается в случае короткой позиции.
